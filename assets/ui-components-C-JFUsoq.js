import{r as t,R as H}from"./router-vendor-CukO4iJV.js";import{j as o,u as P,a as L}from"./core-components-ZZLw475P.js";const D=(e=[],n="normal")=>{t.useEffect(()=>{if(!e.length)return;const a=async()=>{const i=e.map(r=>new Promise((c,m)=>{const d=new Image;d.onload=()=>c(r),d.onerror=()=>m(new Error(`Failed to preload: ${r}`)),d.src=r}));try{await Promise.all(i),console.log(`✅ Preloaded ${e.length} images with priority: ${n}`)}catch(r){console.warn("⚠️ Some images failed to preload:",r.message)}},l={high:0,normal:100,low:500}[n]||100,s=setTimeout(a,l);return()=>clearTimeout(s)},[e,n])},F=({images:e=[],priority:n="normal",onComplete:a=()=>{},onError:l=()=>{}})=>(t.useEffect(()=>{if(!e.length)return;(async()=>{try{const i=e.map(r=>{const c=new Image;return new Promise((m,d)=>{c.onload=()=>m(r),c.onerror=()=>d(new Error(`Failed to preload: ${r}`)),c.src=r})});await Promise.all(i),a()}catch(i){l(i)}})()},[e,a,l]),null),V=({threshold:e=.1,rootMargin:n="200px",priority:a="normal",preloadThreshold:l="400px",enablePreload:s=!0,mobileRootMargin:i="100px",fallbackHeight:r=200,animateIn:c=!0,onLoad:m=()=>{},onError:d=()=>{}}={})=>{const f=P(),[g,y]=t.useState(!1),[h,b]=t.useState(!1),[w,u]=t.useState(!1),[p,j]=t.useState(!1),z=t.useMemo(()=>({threshold:e,rootMargin:f?i:n,triggerOnce:!0}),[e,n,i,f]),S=t.useMemo(()=>({threshold:0,rootMargin:l,triggerOnce:!0}),[l]),{ref:R,inView:k}=L(z),{ref:C,inView:E}=L(s?S:{threshold:0}),I=t.useCallback(m,[]),$=t.useCallback(d,[]);t.useEffect(()=>{k&&!g&&(y(!0),setTimeout(()=>{u(!0),I()},a==="high"?0:a==="normal"?50:100))},[k,g,a,I]),t.useEffect(()=>{E&&s&&!h&&b(!0)},[E,s,h]);const v=x=>{j(!0),$(x)};return{ref:x=>{R(x),s&&C(x)},shouldLoad:g,shouldPreload:h,hasLoaded:w,hasError:p,isVisible:k,config:{fallbackHeight:f?r*.7:r,animateIn:c,priority:a},handleError:v}},T=({children:e,priority:n="normal",enablePreload:a=!0,fallbackHeight:l=200,loadingComponent:s,errorComponent:i,animateIn:r=!0,className:c="",style:m={},onLoad:d=()=>{},onError:f=()=>{},...g})=>{const{ref:y,shouldLoad:h,hasLoaded:b,hasError:w,config:u}=V({priority:n,enablePreload:a,fallbackHeight:l,onLoad:d,onError:f,...g}),p=()=>o.jsx("div",{className:"lazy-section-loader",style:{minHeight:`${u.fallbackHeight}px`,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"loading-shimmer 1.5s infinite",borderRadius:"4px",margin:"1rem 0"},children:o.jsx("div",{style:{color:"#666",fontSize:"0.9rem",opacity:.7},children:"Cargando..."})}),j=()=>o.jsxs("div",{className:"lazy-section-error",style:{minHeight:`${u.fallbackHeight}px`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#e74c3c",border:"1px solid #fadbd8",borderRadius:"4px",padding:"2rem",margin:"1rem 0",backgroundColor:"#fdf2f2"},children:[o.jsx("div",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:"⚠️ Error al cargar contenido"}),o.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",background:"#e74c3c",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Recargar página"})]}),z=u.animateIn&&b?{opacity:1,transform:"translateY(0)",transition:"opacity 0.3s ease-out, transform 0.3s ease-out"}:u.animateIn?{opacity:0,transform:"translateY(20px)",transition:"opacity 0.3s ease-out, transform 0.3s ease-out"}:{};return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        @keyframes loading-shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
        }
        .lazy-section-priority-high { z-index: 100; }
        .lazy-section-priority-normal { z-index: 50; }
        .lazy-section-priority-low { z-index: 10; }
      `}),o.jsx("div",{ref:y,className:`lazy-section lazy-section-priority-${n} ${c}`,style:{...m,...z},"data-priority":n,"data-preload":a,children:w?i||o.jsx(j,{}):h?o.jsx(H.Suspense,{fallback:s||o.jsx(p,{}),children:e}):s||o.jsx(p,{})})]})},W=({text:e="Cargando..."})=>o.jsx("div",{className:"loading-spinner",children:e});export{F as I,W as L,T as a,D as u};
//# sourceMappingURL=ui-components-C-JFUsoq.js.map
