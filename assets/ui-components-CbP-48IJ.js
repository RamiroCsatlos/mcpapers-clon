import{r as i,R as C}from"./router-vendor-CukO4iJV.js";import{j as r,u as v,a as E}from"./core-components-CsQP1td1.js";const N=(e=[],t="normal")=>{i.useEffect(()=>{if(!e.length)return;const a=async()=>{const n=e.map(o=>new Promise((c,m)=>{const d=new Image;d.onload=()=>c(o),d.onerror=()=>m(new Error(`Failed to preload: ${o}`)),d.src=o}));try{await Promise.all(n),console.log(`✅ Preloaded ${e.length} images with priority: ${t}`)}catch(o){console.warn("⚠️ Some images failed to preload:",o.message)}},l={high:0,normal:100,low:500}[t]||100,s=setTimeout(a,l);return()=>clearTimeout(s)},[e,t])},D=({images:e=[],priority:t="normal",onComplete:a=()=>{},onError:l=()=>{}})=>(i.useEffect(()=>{if(!e.length)return;(async()=>{try{const n=e.map(o=>{const c=new Image;return new Promise((m,d)=>{c.onload=()=>m(o),c.onerror=()=>d(new Error(`Failed to preload: ${o}`)),c.src=o})});await Promise.all(n),a()}catch(n){l(n)}})()},[e,a,l]),null),H=({threshold:e=.1,rootMargin:t="200px",priority:a="normal",preloadThreshold:l="400px",enablePreload:s=!0,mobileRootMargin:n="100px",fallbackHeight:o=200,animateIn:c=!0,onLoad:m=()=>{},onError:d=()=>{}}={})=>{const f=v(),[g,y]=i.useState(!1),[h,w]=i.useState(!1),[b,u]=i.useState(!1),[p,j]=i.useState(!1),z=i.useMemo(()=>({threshold:e,rootMargin:f?n:t,triggerOnce:!0}),[e,t,n,f]),L=i.useMemo(()=>({threshold:0,rootMargin:l,triggerOnce:!0}),[l]),{ref:S,inView:I}=E(z),{ref:R,inView:k}=E(s?L:{threshold:0});i.useEffect(()=>{I&&!g&&(y(!0),setTimeout(()=>{u(!0),m()},a==="high"?0:a==="normal"?50:100))},[I,g,a,m]),i.useEffect(()=>{k&&s&&!h&&w(!0)},[k,s,h]);const $=x=>{j(!0),d(x)};return{ref:x=>{S(x),s&&R(x)},shouldLoad:g,shouldPreload:h,hasLoaded:b,hasError:p,isVisible:I,config:{fallbackHeight:f?o*.7:o,animateIn:c,priority:a},handleError:$}},F=({children:e,priority:t="normal",enablePreload:a=!0,fallbackHeight:l=200,loadingComponent:s,errorComponent:n,animateIn:o=!0,className:c="",style:m={},onLoad:d=()=>{},onError:f=()=>{},...g})=>{const{ref:y,shouldLoad:h,hasLoaded:w,hasError:b,config:u}=H({priority:t,enablePreload:a,fallbackHeight:l,onLoad:d,onError:f,...g}),p=()=>r.jsx("div",{className:"lazy-section-loader",style:{minHeight:`${u.fallbackHeight}px`,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"loading-shimmer 1.5s infinite",borderRadius:"4px",margin:"1rem 0"},children:r.jsx("div",{style:{color:"#666",fontSize:"0.9rem",opacity:.7},children:"Cargando..."})}),j=()=>r.jsxs("div",{className:"lazy-section-error",style:{minHeight:`${u.fallbackHeight}px`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#e74c3c",border:"1px solid #fadbd8",borderRadius:"4px",padding:"2rem",margin:"1rem 0",backgroundColor:"#fdf2f2"},children:[r.jsx("div",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:"⚠️ Error al cargar contenido"}),r.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",background:"#e74c3c",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Recargar página"})]}),z=u.animateIn&&w?{opacity:1,transform:"translateY(0)",transition:"opacity 0.3s ease-out, transform 0.3s ease-out"}:u.animateIn?{opacity:0,transform:"translateY(20px)",transition:"opacity 0.3s ease-out, transform 0.3s ease-out"}:{};return r.jsxs(r.Fragment,{children:[r.jsx("style",{children:`
        @keyframes loading-shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
        }
        .lazy-section-priority-high { z-index: 100; }
        .lazy-section-priority-normal { z-index: 50; }
        .lazy-section-priority-low { z-index: 10; }
      `}),r.jsx("div",{ref:y,className:`lazy-section lazy-section-priority-${t} ${c}`,style:{...m,...z},"data-priority":t,"data-preload":a,children:b?n||r.jsx(j,{}):h?r.jsx(C.Suspense,{fallback:s||r.jsx(p,{}),children:e}):s||r.jsx(p,{})})]})},O=({text:e="Cargando..."})=>r.jsx("div",{className:"loading-spinner",children:e});export{D as I,O as L,F as a,N as u};
//# sourceMappingURL=ui-components-CbP-48IJ.js.map
